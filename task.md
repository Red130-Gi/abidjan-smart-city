# Abidjan Smart City Platform - Project Tasks

- [x] Project Initialization & Architecture Design
    - [x] Create project directory structure
    - [x] Define global architecture (Lambda, Microservices)
    - [x] Create architecture diagrams/descriptions
- [x] Infrastructure Setup
    - [x] Create docker-compose.yml (Kafka, Zookeeper, Spark, Postgres, Mongo, Redis)
    - [x] Configure networks and volumes
- [x] Data Ingestion Layer
    - [x] Implement IoT Data Producers (Python)
    - [x] Configure Kafka Topics
- [x] Stream Processing Layer
    - [x] Implement Spark Streaming Jobs (PySpark)
    - [x] Implement Data Cleaning & Enrichment
- [x] Storage Layer
    - [x] Initialize PostgreSQL/PostGIS schemas
    - [x] Initialize MongoDB collections
- [x] Machine Learning Layer
    - [x] Feature Engineering Pipeline
    - [x] Train XGBoost & LSTM Models
    - [x] Implement Anomaly Detection
- [x] API Layer
    - [x] Setup FastAPI project
    - [x] Implement Endpoints (Traffic, Predictions)
    - [x] Implement Auth (JWT)
- [x] Visualization & Monitoring
    - [x] Configure Grafana Dashboards
- [x] Final Review & Documentation
    - [x] Unit tests
    - [x] Load tests
# Abidjan Smart City Platform - Project Tasks

- [x] Project Initialization & Architecture Design
    - [x] Create project directory structure
    - [x] Define global architecture (Lambda, Microservices)
    - [x] Create architecture diagrams/descriptions
- [x] Infrastructure Setup
    - [x] Create docker-compose.yml (Kafka, Zookeeper, Spark, Postgres, Mongo, Redis)
    - [x] Configure networks and volumes
- [x] Data Ingestion Layer
    - [x] Implement IoT Data Producers (Python)
    - [x] Configure Kafka Topics
- [x] Stream Processing Layer
    - [x] Implement Spark Streaming Jobs (PySpark)
    - [x] Implement Data Cleaning & Enrichment
- [x] Storage Layer
    - [x] Initialize PostgreSQL/PostGIS schemas
    - [x] Initialize MongoDB collections
- [x] Machine Learning Layer
    - [x] Feature Engineering Pipeline
    - [x] Train XGBoost & LSTM Models
    - [x] Implement Anomaly Detection
- [x] API Layer
    - [x] Setup FastAPI project
    - [x] Implement Endpoints (Traffic, Predictions)
    - [x] Implement Auth (JWT)
- [x] Visualization & Monitoring
    - [x] Configure Grafana Dashboards
- [x] Final Review & Documentation
    - [x] Unit tests
    - [x] Load tests
    - [x] API & Deployment documentation
- [x] Future Route Planning Map
    - [x] Create static/future_map.html
    - [x] Add API endpoint for map serving
    - [x] Verify map functionality
    - [x] Verify map functionality
- [x] Advanced ML Models (LSTM + Ensemble)
    - [x] Add dependencies (tensorflow)
    - [x] Implement LSTM model (`src/ml/lstm_model.py`)
    - [x] Implement Ensemble model (`src/ml/ensemble_model.py`)
    - [x] Update prediction simulator to use Ensemble
    - [x] Update Grafana dashboard with Ensemble predictions
    - [x] Migrate Ensemble panel to Predictions Dashboard
    - [x] Update platform to use Ensemble model globally
    - [x] Add 1h horizon prediction panel to dashboard
    - [x] Add 1h horizon details table to dashboard

## ML Pipeline Overhaul
- [x] **Data Preprocessing**
    - [x] Implement data cleaning (remove negatives, interpolate)
    - [x] Create temporal features (hour, dayofweek, peak, etc.)
    - [x] Define correct congestion label (speed < 15)
    - [x] Implement normalization (Scalers) and saving
- [x] **Classical Models Optimization**
    - [x] Implement time-series split (no shuffle)
    - [x] Implement GridSearchCV/RandomizedSearchCV for XGBoost/RF
    - [x] Optimize for R¬≤ > 0.50 (Speed) and Accuracy > 0.80 (Congestion)
- [x] **LSTM per Segment**
    - [x] Implement sequence creation (window=20)
    - [x] Define specific LSTM architecture (64->32->16->1)
    - [x] Add callbacks (EarlyStopping, ReduceLROnPlateau)
    - [x] Implement per-segment training and saving
- [x] **Ensemble Model**
    - [x] Combine LSTM predictions + Classical Features
    - [x] Train final meta-model
    - [x] Target R¬≤ > 0.60
- [x] **Infrastructure & Logging**
    - [x] Reorganize `src/ml/models/` structure
    - [x] Implement detailed logging (scores, params, warnings)

## üó∫Ô∏è OSRM Integration (Realistic Routing)
- [x] **Frontend Integration**
    - [x] Add `leaflet-routing-machine` to `future_map.html`
    - [x] Configure OSRM service (Public API for demo)
    - [x] Update map drawing to snap to roads
- [ ] **Backend Geometry**
    - [ ] Update `route_optimizer.py` to fetch/cache real geometry from OSRM
    - [ ] Replace straight lines with Polyline decoding

## üêò Big Data Scaling (Cassandra Migration)
- [x] **Infrastructure**
    - [x] Add Cassandra to `docker-compose.yml`
    - [x] Add `cassandra-driver` to `requirements.txt`
    - [x] Create `src/db/cassandra_db.py` (Connection & Schema)
- [x] **Processing Layer**
    - [x] Update `src/spark/traffic_streaming.py` to write to Cassandra
- [x] **Data Generation**
    - [x] Scale `traffic_producer.py` to 5000 vehicles

## üå¶Ô∏è ML Improvement: Weather Integration
- [x] **Data Pipeline**
    - [x] Verify/Enable weather data storage (Spark/Postgres)
- [x] **Feature Engineering**
    - [x] Update `feature_engineering.py` to include rain/temperature
- [x] **Training**
    - [x] Retrain model with weather features
